{% extends 'base.html' %}
{% load static %}
{% block content %}
<link href='{%static "css/Simditor/simditor.css"%}' rel="stylesheet">
<script type="text/javascript" src='{%static "js/jquery-3.3.1.min.js"%}'></script>
<script>
//文字編輯器
    $(function() {
      
      var editor = new Simditor({
          textarea: $("#id_content"),
          placeholder: "在此撰寫公告",
          toolbar: [ 'title', 'bold', 'italic', 'underline', 'strikethrough', 'color','mark', '|', 'ol', 'ul', 'blockquote','hr','|','indent','outdent','alignment', 'code', 'table', 'link','image'],
          pasteImage:true,
          
          upload: {
              url: '/simditor/upload/',
              fileKey: 'upload',
              image_size: 1024 * 1024 * 4   
          },
        });
        
    });
</script>
<div class="container">
    <form  action="/group/add/" method="post">
    {% csrf_token %}
      <div class="form-group">
            <label >群組名稱</label>
            <input type="text" class="form-control" name="newTitle" id="newTitle" placeholder="" >
            
      </div>
      <div class="form-group">
            <label for="exampleFormControlSelect1">隱私設定</label>
            <select class="form-control" id="newPrivate" name="newPrivate">
              <option value=1 {% if private == 1 %}selected="selected"{% endif %}>公開(所有人可進群組觀看內容)</option>
              <option value=0 {% if private == 0 %}selected="selected"{% endif %}>非公開(須為成員才能進入群組)</option>
            </select>
      </div>
        
      <div class="form-group">
            <label>群組介紹</label>
            <textarea class="form-control form-control-textarea" id="newIntro"name="newIntro"></textarea>
      </div>
      <div class="form-group">
        <label>公告</label>
        <textarea id="id_content" placeholder="Balabala" name="newContent" autofocus></textarea>

      </div>
        <button type="submit" class="btn btn-outline-dark" onClick=" validateForm(this.form); return false">發布</button>
      </form>
</div>
<script >
  function validateForm(form)
  {
      if (!checkTitle(form.newTitle)) {
         
          return false;
      }
      
      else if (!checkIntro(form.newIntro)) {
         
          return false;
      }
      
      
      form.submit();
      return(true);

  }
  

  function checkTitle(control){
      var content=control.value
      if (content==''){
          alert("錯誤：請輸入Title ");
          return (false);
      }
      if(content.length>50){
          alert("錯誤：Title 最長50字元");
          return (false);
      }
      
      return true
  }
  function checkIntro(control){
    var intro=control.value
    if(intro.length>1000){
          alert("錯誤：introduction 最長1000字元");
          return (false);
      }
    return true;
  }
 
</script>
{% endblock  %}